<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Night Games v671</title>
  <style>
    :root{
      /* IMPORTANT: Use the blank stage background so we don't double-stack baked UI */
      --bgStage: url("./IMG_7315.jpeg");

      --maxW: 760px;
      --uiW: min(var(--maxW), calc(100vw - 32px));
      --txt: rgba(245,250,255,.94);

      --cyan: rgba(0,210,255,.95);
      --cyanGlow: rgba(0,210,255,.14);
      --amber: rgba(255,175,0,.95);
      --amberGlow: rgba(255,175,0,.10);

      --zShadow: drop-shadow(0 22px 46px rgba(0,0,0,.72));
      --zShadowSoft: drop-shadow(0 10px 22px rgba(0,0,0,.55));
    }

    html, body{
      height:100%;
      margin:0;
      background:#000;
      color:var(--txt);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overflow:hidden;
    }

    /* Visible version badge (always) */
    .buildBadge{
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 9999;
      padding: 10px 12px;
      border-radius: 14px;
      background: rgba(0,0,0,.35);
      border: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.92);
      font-weight: 1000;
      letter-spacing: 1px;
      font-size: 12px;
      text-transform: uppercase;
      pointer-events: none;
      box-shadow: 0 10px 22px rgba(0,0,0,.55);
    }
    .buildBadge b{ color: rgba(0,210,255,.95); }

    #app{ position:fixed; inset:0; }

    .screen{
      position:absolute;
      inset:0;
      display:none;
    }
    .screen.active{ display:block; }

    .screen::before{
      content:"";
      position:absolute;
      inset:0;
      background-image: var(--bgStage);
      background-repeat:no-repeat;
      background-size:cover;
      background-position: center bottom; /* keep footer visible */
      transform: translateZ(0);
    }
    .screen::after{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(130% 110% at 50% 25%, rgba(0,0,0,0), rgba(0,0,0,.22) 60%, rgba(0,0,0,.52) 100%);
      pointer-events:none;
    }

    /* ===== Shared crystal UI components (no fog / no blur) ===== */
    .panel{
      border-radius: 22px;
      background: rgba(255,255,255,.03);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow:
        inset 0 2px 6px rgba(255,255,255,.38),
        inset 0 -14px 22px rgba(0,0,0,.62),
        0 0 18px rgba(0,210,255,.10);
      overflow:hidden;
      filter: var(--zShadowSoft);
    }

    .title{
      font-weight: 1000;
      letter-spacing: 2px;
      text-transform: uppercase;
      font-size: 15px;
      color: rgba(255,255,255,.94);
      text-shadow: 0 0 14px rgba(0,210,255,.10);
    }

    .field3d, .btn3d{
      width: min(640px, 92vw);
      height: 74px;
      border-radius: 22px;
      -webkit-tap-highlight-color: transparent;
      transform: translateZ(0);
      filter: var(--zShadow);
      border: 1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.035);
      box-shadow:
        inset 0 2px 6px rgba(255,255,255,.45),
        inset 0 -14px 22px rgba(0,0,0,.60),
        0 0 18px rgba(0,210,255,.10);
      position:relative;
      overflow:hidden;
    }

    .field3d::before, .btn3d::before{
      content:"";
      position:absolute;
      inset: 10px 12px auto 12px;
      height: 18px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(255,255,255,.50), rgba(255,255,255,0));
      opacity: .42;
      pointer-events:none;
    }

    .field3d::after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: 22px;
      box-shadow: inset 0 0 0 1px rgba(0,210,255,.14);
      pointer-events:none;
    }

    .btn3d::after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: 22px;
      box-shadow:
        inset 0 0 0 1px rgba(255,175,0,.14),
        0 0 18px rgba(255,175,0,.08);
      pointer-events:none;
    }

    .field3d input{
      width:100%;
      height:100%;
      border:0;
      outline:none;
      background:transparent;
      color: rgba(255,255,255,.95);
      font-size: 20px;
      letter-spacing: .6px;
      padding: 0 22px;
      box-sizing:border-box;
    }
    .field3d input::placeholder{ color: rgba(235,245,255,.55); }

    .btn3d{
      cursor:pointer;
      color: rgba(255,255,255,.96);
      font-weight: 1000;
      font-size: 30px;
      letter-spacing: 2px;
      text-transform: uppercase;
    }
    .btn3d:active{
      transform: translateY(2px) scale(.995);
      filter: var(--zShadowSoft);
    }

    .err{
      margin-top: -6px;
      font-size: 14px;
      color: rgba(255,200,160,.92);
      text-shadow: 0 0 12px rgba(255,150,80,.25);
      opacity: 0;
      transition: opacity .15s ease;
      pointer-events:none;
    }
    .err.show{ opacity: 1; }

    /* ===== Landing (same style as Players) ===== */
    .landingUI{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      width: var(--uiW);
      max-width: var(--maxW);
      top: clamp(360px, 52vh, 610px);
      display:grid;
      gap: 16px;
      justify-items:center;
      z-index:2;
    }

    /* ===== Players hub ===== */
    .hub{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      width: var(--uiW);
      max-width: var(--maxW);
      top: clamp(240px, 33vh, 360px);
      bottom: max(140px, env(safe-area-inset-bottom)); /* keep off footer text */
      display:grid;
      grid-template-rows: 1fr 1fr;
      gap: 18px;
      padding: 0 16px;
      box-sizing:border-box;
      z-index:2;
    }

    .sectionHead{
      display:flex;
      align-items:center;
      justify-content: space-between;
      padding: 12px 14px 8px 14px;
      gap: 10px;
    }

    .list{
      position:absolute;
      left: 0; right: 0;
      top: 44px; bottom: 0;
      padding: 10px 12px 12px 12px;
      box-sizing: border-box;
      overflow:auto;
      scrollbar-gutter: stable;
    }

    .list::-webkit-scrollbar{ width: 10px; }
    .list::-webkit-scrollbar-thumb{
      background: linear-gradient(180deg, rgba(0,210,255,.22), rgba(255,175,0,.16));
      border-radius: 999px;
      border: 2px solid rgba(0,0,0,.25);
    }
    .list::-webkit-scrollbar-track{ background: rgba(0,0,0,.12); border-radius: 999px; }

    .row{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      padding: 12px 12px;
      border-radius: 18px;
      margin-bottom: 10px;
      background: rgba(255,255,255,.025);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow:
        inset 0 2px 6px rgba(255,255,255,.32),
        inset 0 -12px 18px rgba(0,0,0,.62);
      position:relative;
      overflow:hidden;
    }
    .row::after{
      content:"";
      position:absolute;
      inset:-60% -20%;
      background: radial-gradient(circle at 30% 20%, rgba(255,255,255,.10), rgba(255,255,255,0) 55%);
      transform: rotate(12deg);
      pointer-events:none;
      opacity:.55;
    }
    .row strong{
      font-size: 15px;
      letter-spacing: .4px;
      color: rgba(255,255,255,.96);
      text-shadow: 0 1px 0 rgba(255,255,255,.35), 0 -1px 2px rgba(0,0,0,.70);
      position:relative;
      z-index:1;
    }
    .actions{ display:flex; gap:10px; align-items:center; flex:0 0 auto; position:relative; z-index:1; }

    .pill{
      border: 1px solid rgba(255,255,255,.22);
      background: rgba(255,255,255,.03);
      color: rgba(255,255,255,.95);
      border-radius: 999px;
      padding: 8px 12px;
      font-size: 12px;
      font-weight: 1000;
      letter-spacing: 1px;
      text-transform: uppercase;
      cursor:pointer;
      box-shadow:
        inset 0 2px 4px rgba(255,255,255,.45),
        inset 0 -10px 14px rgba(0,0,0,.62),
        0 0 14px rgba(0,210,255,.10);
    }
    .pill:active{ transform: translateY(1px); }

    /* Active player highlight */
    .row.active{
      border-color: rgba(0,210,255,.22);
      box-shadow:
        inset 0 2px 6px rgba(255,255,255,.32),
        inset 0 -12px 18px rgba(0,0,0,.62),
        0 0 18px rgba(0,210,255,.14);
    }
  </style>
</head>
<body>
  <div class="buildBadge">Build <b>v671</b></div>

  <div id="app">
    <!-- LANDING -->
    <section id="screenLanding" class="screen active" aria-label="Landing">
      <div class="landingUI">
        <div class="field3d" aria-label="Email">
          <input id="email" type="email" inputmode="email" autocomplete="email" placeholder="YOUR EMAIL"/>
        </div>
        <button id="enterBtn" class="btn3d" type="button">Enter</button>
        <div id="err" class="err" aria-live="polite">Enter your email to continue.</div>
      </div>
    </section>

    <!-- PLAYERS -->
    <section id="screenPlayers" class="screen" aria-label="Players">
      <div class="hub">
        <div class="panel" style="position:relative;">
          <div class="sectionHead">
            <div class="title">Games</div>
          </div>
          <div class="list" id="gamesList" role="list"></div>
        </div>

        <div class="panel" style="position:relative;">
          <div class="sectionHead">
            <div class="title">Players</div>
          </div>
          <div class="list" id="playersList" role="list"></div>
        </div>
      </div>
    </section>
  </div>

  <script>
    (function(){
      console.log("Night Games v671 loaded");

      const $ = (id)=>document.getElementById(id);
      const screenLanding = $("screenLanding");
      const screenPlayers = $("screenPlayers");
      const email = $("email");
      const enterBtn = $("enterBtn");
      const err = $("err");

      const gamesList = $("gamesList");
      const playersList = $("playersList");

      function show(screen){
        screenLanding.classList.toggle("active", screen === "landing");
        screenPlayers.classList.toggle("active", screen === "players");
      }

      function setError(on){ err.classList.toggle("show", !!on); }

      function goPlayers(){
        const v = (email.value || "").trim();
        if(!v){ setError(true); return; }
        setError(false);
        localStorage.setItem("ng_email", v);
        show("players");
      }

      enterBtn.addEventListener("click", goPlayers);
      email.addEventListener("keydown", (e)=>{
        if(e.key === "Enter"){ e.preventDefault(); goPlayers(); }
      });

      function row(label, actions){
        const btns = (actions||[]).map(a => `<button class="pill" data-action="${a.action}">${a.text}</button>`).join("");
        return `<div class="row"><strong>${label}</strong><div class="actions">${btns}</div></div>`;
      }

      function seed(){
        const games = ["01","Cricket","Killer","Shanghai","Around the World","Half It"];
        const players = ["Steven Moody","Jace Moody","Brother Moody"];

        gamesList.innerHTML = games.map(g => row(g, [{action:"enter", text:"Enter"}, {action:"history", text:"History"}])).join("");
        playersList.innerHTML = players.map(p => row(p, [{action:"history", text:"History"}, {action:"stats", text:"Stats"}])).join("");

        // Active player click (row body)
        playersList.addEventListener("click", (e)=>{
          const r = e.target.closest(".row");
          if(!r) return;
          const btn = e.target.closest(".pill");
          if(btn) return; // buttons will be wired later
          [...playersList.querySelectorAll(".row")].forEach(x=>x.classList.remove("active"));
          r.classList.add("active");
        });
      }

      seed();

      // Helpful: if already signed in before, prefill
      const saved = localStorage.getItem("ng_email");
      if(saved) email.value = saved;

      setTimeout(()=>{ try{ email.focus(); }catch(_){} }, 50);
    })();
  </script>
</body>
</html>
